import{_ as E,d as I,o as F,c as T,a as s,b as l,w as a,F as $,e as h,a9 as z,a3 as N,aa as P,ab as S,E as u,ac as B,a4 as U,m as D,g as L,h as M,i as o,Q as f,a5 as W,a6 as O,k as j,l as Q,f as q,j as G,a7 as H,a8 as J}from"./index-f9d9056b.js";import{E as K}from"./el-date-picker-40727c2c.js";const R=I({data(){return{value:"",detailC:{},current:2,total:100,size:10,formInline:{},articleCats:[],page:{total:"100",current:1,size:"10"},dialogFormVisible:!1,dialogFormVisible1:!1,articleCat:{articleCatId:0,content:"",createTime:"",deleted:0,id:0,open:0,title:"",updateTime:"",userinfoId:0},formLabelWidth:98}},created(){},mounted(){this.getArticleCatsPage(1)},methods:{gouser(){this.$router.push({path:"/Newaricle2"})},gofenlei(){this.$router.push({path:"/Newaricle"})},addTask(){this.$router.push({path:"/Newaricle1"})},changeOption(e){console.log("切换了",e),this.$router.push({path:"/"+e})},daohang(e){console.log("aaa",h(e)),this.detailC=h(e),this.dialogFormVisible1=!0},pageChange(e){console.log("113",e)},Find(){this.articleCats1=[],this.articleCats.filter(e=>{e.title.indexOf(this.formInline.title)!==-1&&this.articleCats.push(e),this.articleCats=[],this.articleCats=this.articleCats1})},toEdit(e){this.dialogFormVisible=!0,this.articleCat=h(e),console.log(this.articleCat)},getArticleCatsPage(e){this.articleCats=[];const t={current:this.current,size:this.size};z().then(n=>{console.log("入参",t,n),this.articleCats=n.data.articles}).catch(n=>{console.log(n)})},currentchange(e){this.getArticleCatsPage(e),this.page.current=e},del(e){N.confirm("确定删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{P({id:e}).then(n=>{if(n.success){const g=this.articleCats.findIndex(C=>C.id===e);this.articleCats.splice(g,1),this.page.total--,this.articleCats.length===0&&this.page.current>1?this.currentchange(this.page.current-1):this.getArticleCatsPage(this.page.current)}else return console.log(n.msg),!1}).catch(n=>{})}).catch(()=>{})},toAdd(){this.dialogFormVisible=!0,this.resetArticleCat()},save(){const e=this.articleCat;e.id==0?S(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getArticleCatsPage(this.page.current),u(t.msg),this.resetArticleCat();else return u(t.msg),!1}).catch(t=>{u("失败")}):B(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getArticleCatsPage(this.page.current),u(t.msg),this.resetArticleCat();else return u(t.msg),!1}).catch(t=>{u("失败")})},resetArticleCat(){this.articleCat={articleCatId:0,content:"",createTime:"",deleted:0,id:0,open:0,title:"",updateTime:"",userinfoId:0}}}}),v=e=>(H("data-v-0858f4b0"),e=e(),J(),e),X={class:"articleCats"},Y=v(()=>s("div",{class:"title"},[s("h1",null,"文章列表")],-1)),Z=v(()=>s("div",{class:"flex-grow"},null,-1)),x={class:"article-tools"},ee={class:"dialog-footer"},te={style:{width:"45vw",height:"100vh"}},le={class:"title",style:{"font-size":"1.2vw","font-weight":"bold"}},ae={style:{"margin-top":"20px"}},ie={style:{width:"40vw","margin-top":"20px"}};function oe(e,t,n,g,C,se){const m=W,k=O,y=U,p=j,r=Q,d=q,b=D,c=G,A=L,_=K,w=M;return F(),T($,null,[s("div",X,[l(y,{"default-active":e.activeIndex,class:"el-menu-demo",mode:"horizontal",ellipsis:!1,onSelect:e.handleSelect},{default:a(()=>[Y,Z,l(m,{index:"1",onClick:t[0]||(t[0]=i=>e.gouser())},{default:a(()=>[o("用户端")]),_:1}),l(k,{index:"2"},{title:a(()=>[o("文章管理")]),default:a(()=>[l(m,{index:"2-1",onClick:t[1]||(t[1]=i=>e.gofenlei())},{default:a(()=>[o("文章分类")]),_:1}),l(m,{index:"2-2",onClick:t[2]||(t[2]=i=>e.addTask())},{default:a(()=>[o("文章列表")]),_:1})]),_:1})]),_:1},8,["default-active","onSelect"]),s("div",x,[l(b,{inline:!0,model:e.formInline,class:"demo-form-inline"},{default:a(()=>[l(r,null,{default:a(()=>[l(p,{modelValue:e.formInline.title,"onUpdate:modelValue":t[3]||(t[3]=i=>e.formInline.title=i),placeholder:"请输入关键词",class:"test"},null,8,["modelValue"])]),_:1}),l(r,null,{default:a(()=>[l(d,{type:"primary",onClick:e.Find},{default:a(()=>[o("查询")]),_:1},8,["onClick"]),l(d,{type:"warning",onClick:e.toAdd},{default:a(()=>[o("添加")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),l(A,{data:e.articleCats,stripe:"",style:{width:"100%"},"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}},{default:a(()=>[l(c,{fixed:"",prop:"id",label:"id",width:"80",sortable:""}),l(c,{prop:"title",label:"文章标题",width:"120"}),l(c,{prop:"content",label:"文章内容",width:"500"}),l(c,{prop:"createTime",label:"创建时间",width:"200"}),l(c,{prop:"updateTime",label:"更新时间",width:"200"}),o("> "),l(c,{fixed:"right",label:"操作",width:"300"},{default:a(i=>[l(d,{type:"primary",size:"default",onClick:V=>e.toEdit(i.row),round:""},{default:a(()=>[o("更新")]),_:2},1032,["onClick"]),l(d,{type:"danger",size:"default",onClick:V=>e.del(i.row.id),round:""},{default:a(()=>[o("删除")]),_:2},1032,["onClick"]),l(d,{type:"success",size:"default",onClick:V=>e.daohang(i.row),round:""},{default:a(()=>[o("查看")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),l(w,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[9]||(t[9]=i=>e.dialogFormVisible=i),title:"文章编辑"},{footer:a(()=>[s("span",ee,[l(d,{onClick:t[8]||(t[8]=i=>e.dialogFormVisible=!1)},{default:a(()=>[o("取消")]),_:1}),l(d,{type:"primary",onClick:e.save},{default:a(()=>[o("保存")]),_:1},8,["onClick"])])]),default:a(()=>[l(b,{model:e.articleCat},{default:a(()=>[l(r,{label:"文章标题","label-width":e.formLabelWidth},{default:a(()=>[l(p,{modelValue:e.articleCat.title,"onUpdate:modelValue":t[4]||(t[4]=i=>e.articleCat.title=i),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"文章内容","label-width":e.formLabelWidth},{default:a(()=>[l(p,{type:"textarea",rows:5,placeholder:"请输入内容",modelValue:e.articleCat.content,"onUpdate:modelValue":t[5]||(t[5]=i=>e.articleCat.content=i)},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"创建时间","label-width":e.formLabelWidth},{default:a(()=>[l(_,{modelValue:e.articleCat.createTime,"onUpdate:modelValue":t[6]||(t[6]=i=>e.articleCat.createTime=i),type:"date",autocomplete:"off",placeholder:"选择日期"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(r,{label:"更新时间","label-width":e.formLabelWidth},{default:a(()=>[l(_,{modelValue:e.articleCat.updateTime,"onUpdate:modelValue":t[7]||(t[7]=i=>e.articleCat.updateTime=i),type:"date",autocomplete:"off",placeholder:"选择日期"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(w,{modelValue:e.dialogFormVisible1,"onUpdate:modelValue":t[10]||(t[10]=i=>e.dialogFormVisible1=i),title:"查看"},{default:a(()=>[s("div",te,[s("div",le,f(e.detailC.title),1),s("div",ae,"更新时间"+f(e.detailC.createTime),1),s("div",ie,f(e.detailC.content),1)])]),_:1},8,["modelValue"])],64)}const re=E(R,[["render",oe],["__scopeId","data-v-0858f4b0"]]);export{re as default};
