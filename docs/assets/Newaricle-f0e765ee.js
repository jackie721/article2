import{_ as A,d as I,o as E,c as T,a as d,b as a,w as l,F as y,e as N,a3 as $,E as r,a4 as F,m as z,g as P,h as B,i as o,a5 as S,a6 as D,k as M,l as U,f as L,j as O,a7 as W,a8 as j}from"./index-f9d9056b.js";import{E as q}from"./el-date-picker-40727c2c.js";import{g as G,A as H,a as J,b as K,c as Q}from"./articleCat4-b92a29bb.js";const R=I({data(){return{value:"",current:2,total:100,size:10,formInline:{},articleCats:[],page:{total:"100",current:1,size:"10"},dialogFormVisible:!1,articleCat:{catName:"",createTime:"",deleted:0,id:0,parentId:0,showInNav:!0,sortOrder:0,updateTime:""},formLabelWidth:98}},created(){},mounted(){this.getArticleCatsPage(1)},methods:{gouser(){this.$router.push({path:"/Newaricle2"})},gofenlei(){this.$router.push({path:"/Newaricle"})},addTask(){this.$router.push({path:"/Newaricle1"})},changeOption(e){console.log("切换了",e),this.$router.push({path:"/"+e})},pageChange(e){console.log("113",e)},Find(){this.articleCats=[],G(this.formInline.id).then(e=>{console.log("reszzzz",e.data),this.articleCats.push(e.data.articleCat)})},toEdit(e){this.dialogFormVisible=!0,this.articleCat=N(e)},getArticleCatsPage(e){this.articleCats=[];const t={current:this.current,size:this.size};H().then(s=>{console.log("入参",t,s);const c=s.data.articleCats;this.articleCats=c,this.page=c}).catch(s=>{console.log(s)})},currentchange(e){this.getArticleCatsPage(e),this.page.current=e},del(e){$.confirm("确定删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{J({id:e}).then(s=>{if(s.success){const c=this.articleCats.findIndex(f=>f.id===e);this.articleCats.splice(c,1),this.page.total--,this.articleCats.length===0&&this.page.current>1?this.currentchange(this.page.current-1):this.getArticleCatsPage(this.page.current)}else return console.log(s.msg),!1}).catch(s=>{})}).catch(()=>{})},toAdd(){this.dialogFormVisible=!0,this.resetArticleCat()},save(){const e=this.articleCat;e.id==0?K(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getArticleCatsPage(this.page.current),r(t.msg),this.resetArticleCat();else return r(t.msg),!1}).catch(t=>{r("失败")}):Q(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getArticleCatsPage(this.page.current),r(t.msg),this.resetArticleCat();else return r(t.msg),!1}).catch(t=>{r("失败")})},resetArticleCat(){this.articleCat={catName:"",createTime:"",deleted:0,id:0,parentId:0,showInNav:!0,sortOrder:0,updateTime:""}}}}),b=e=>(W("data-v-4580f1c3"),e=e(),j(),e),X={class:"articleCats"},Y=b(()=>d("div",{class:"title"},[d("h1",null,"文章分类")],-1)),Z=b(()=>d("div",{class:"flex-grow"},null,-1)),x={class:"article-tools"},ee={class:"dialog-footer"};function te(e,t,s,c,f,ae){const p=S,V=D,k=F,h=M,u=U,n=L,g=z,m=O,v=P,C=q,w=B;return E(),T(y,null,[d("div",X,[a(k,{"default-active":e.activeIndex,class:"el-menu-demo",mode:"horizontal",ellipsis:!1,onSelect:e.handleSelect},{default:l(()=>[Y,Z,a(p,{index:"1",onClick:t[0]||(t[0]=i=>e.gouser())},{default:l(()=>[o("用户端")]),_:1}),a(V,{index:"2"},{title:l(()=>[o("文章管理")]),default:l(()=>[a(p,{index:"2-1",onClick:t[1]||(t[1]=i=>e.gofenlei())},{default:l(()=>[o("文章分类")]),_:1}),a(p,{index:"2-2",onClick:t[2]||(t[2]=i=>e.addTask())},{default:l(()=>[o("文章列表")]),_:1})]),_:1})]),_:1},8,["default-active","onSelect"]),d("div",x,[a(g,{inline:!0,model:e.formInline,class:"demo-form-inline"},{default:l(()=>[a(u,{label:"ID查询"},{default:l(()=>[a(h,{modelValue:e.formInline.id,"onUpdate:modelValue":t[3]||(t[3]=i=>e.formInline.id=i),placeholder:"请输入Id",class:"test"},null,8,["modelValue"])]),_:1}),a(u,null,{default:l(()=>[a(n,{type:"primary",onClick:e.Find},{default:l(()=>[o("查询")]),_:1},8,["onClick"]),a(n,{type:"warning",onClick:e.toAdd},{default:l(()=>[o("添加")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),a(v,{data:e.articleCats,stripe:"",style:{width:"100%"},"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}},{default:l(()=>[a(m,{fixed:"",prop:"id",label:"分类id",sortable:""}),a(m,{prop:"catName",label:"类别名称"}),a(m,{prop:"createTime",label:"创建时间"}),a(m,{prop:"updateTime",label:"更新时间"}),a(m,{fixed:"right",label:"操作"},{default:l(i=>[a(n,{type:"primary",size:"default",onClick:_=>e.toEdit(i.row),round:""},{default:l(()=>[o("更新")]),_:2},1032,["onClick"]),a(n,{type:"danger",size:"default",onClick:_=>e.del(i.row.id),round:""},{default:l(()=>[o("删除")]),_:2},1032,["onClick"]),a(n,{type:"success",size:"default",onClick:t[4]||(t[4]=_=>e.addTask()),round:""},{default:l(()=>[o("导航")]),_:1})]),_:1})]),_:1},8,["data"])]),a(w,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[9]||(t[9]=i=>e.dialogFormVisible=i),title:"文章分类编辑"},{footer:l(()=>[d("span",ee,[a(n,{onClick:t[8]||(t[8]=i=>e.dialogFormVisible=!1)},{default:l(()=>[o("取消")]),_:1}),a(n,{type:"primary",onClick:e.save},{default:l(()=>[o("保存")]),_:1},8,["onClick"])])]),default:l(()=>[a(g,{model:e.articleCat},{default:l(()=>[a(u,{label:"类别名称","label-width":e.formLabelWidth},{default:l(()=>[a(h,{modelValue:e.articleCat.catName,"onUpdate:modelValue":t[5]||(t[5]=i=>e.articleCat.catName=i),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(u,{label:"创建时间","label-width":e.formLabelWidth},{default:l(()=>[a(C,{modelValue:e.articleCat.createTime,"onUpdate:modelValue":t[6]||(t[6]=i=>e.articleCat.createTime=i),type:"date",autocomplete:"off",placeholder:"选择日期"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(u,{label:"更新时间","label-width":e.formLabelWidth},{default:l(()=>[a(C,{modelValue:e.articleCat.updateTime,"onUpdate:modelValue":t[7]||(t[7]=i=>e.articleCat.updateTime=i),type:"date",autocomplete:"off",placeholder:"选择日期"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const se=A(R,[["render",te],["__scopeId","data-v-4580f1c3"]]);export{se as default};
